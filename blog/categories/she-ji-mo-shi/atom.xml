<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: 设计模式 | regenthypo's Blog]]></title>
  <link href="http://www.regenthypo.com/blog/categories/she-ji-mo-shi/atom.xml" rel="self"/>
  <link href="http://www.regenthypo.com/"/>
  <updated>2016-07-21T13:45:44+08:00</updated>
  <id>http://www.regenthypo.com/</id>
  <author>
    <name><![CDATA[regenthypo]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[一天一设计模式之观察者模式[15]]]></title>
    <link href="http://www.regenthypo.com/blog/2016/07/21/observer-design-pattern/"/>
    <updated>2016-07-21T12:58:41+08:00</updated>
    <id>http://www.regenthypo.com/blog/2016/07/21/observer-design-pattern</id>
    <content type="html"><![CDATA[<p><font color=#FF0000><strong>[行为模式]</strong></font></p>

<p><font color=#FF0000><strong>定义对象间的一种一对多的依赖关系,当一个对象的状态发生改变时,所有依赖于它的对象都得到通知并被自动更新.</strong></font></p>

<p><font color=#FF0000><strong>别名:依赖(Dependents),发布-订阅(Publish-Subscribe)</strong></font></p>

<p><img src="/images/observerdp0.jpg"></p>

<p><strong>观察者模式结构</strong><br>
<img src="/images/observerdp1.jpg"></p>

<p><strong>观察者模式角色</strong><br>
<img src="/images/observerdp2.jpg"></p>

<p><strong>观察者模式代码</strong></p>

<p><strong>抽象观察者</strong><br>
<code>java
/**
 *  抽象观察者角色.
 */
public interface Observer
{
    /**
     *  调用这个方法会更新自己.
     */
    void update();
}
</code></p>

<p><strong>具体观察者</strong><br>
<code>java
/**
 *  具体观察者角色.
 */
public class ConcreteObserver implements Observer
{
    /**
     *  调用这个方法会更新自己.
     */
    @Override
    public void update()
    {
        System.out.println("I'm notified!");
    }
}
</code></p>

<p><strong>抽象目标</strong><br>
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">/&lt;</span><span class="n">strong</span><span class="o">&gt;</span>
</span><span class='line'> <span class="o">*</span>  <span class="n">抽象主题角色</span>
</span><span class='line'> <span class="o">*/</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Subject</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="o">/&lt;/</span><span class="n">strong</span><span class="o">&gt;</span>
</span><span class='line'>     <span class="o">*</span>  <span class="n">调用这个方法登记一个新的观察者对象</span>
</span><span class='line'>     <span class="o">*/</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">attach</span><span class="o">(</span><span class="n">Observer</span> <span class="n">observer</span><span class="o">);&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="cm">/**</span>
</span><span class='line'><span class="cm"> *  调用这个方法删除一个已登记的观察者对象 </span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">detach</span><span class="o">(</span><span class="n">Observer</span> <span class="n">observer</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> *  调用这个方法通知所有已登记的观察者. </span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">notifyObservers</span><span class="o">();</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p><strong>具体目标</strong><br>
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">/&lt;</span><span class="n">em</span><span class="o">&gt;*</span>
</span><span class='line'> <span class="o">*</span>  <span class="n">具体主题角色</span><span class="o">.</span>
</span><span class='line'> <span class="o">&lt;/</span><span class="n">em</span><span class="o">&gt;/</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConcreteSubject</span> <span class="kd">implements</span> <span class="n">Subject</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="kd">private</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Observer</span><span class="o">&gt;</span> <span class="n">observers</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Observer</span><span class="o">&gt;();&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="cm">/**</span>
</span><span class='line'><span class="cm"> *  调用这个方法登记一个新的观察者对象</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="nd">@Override</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">attach</span><span class="o">(</span><span class="n">Observer</span> <span class="n">observer</span><span class="o">)</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="n">observers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">observer</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> *  调用这个方法删除一个已登记的观察者对象 </span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="nd">@Override</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">detach</span><span class="o">(</span><span class="n">Observer</span> <span class="n">observer</span><span class="o">)</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="n">observers</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">observer</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> *  调用这个方法通知所有已登记的观察者. </span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="nd">@Override</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">notifyObservers</span><span class="o">()</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="n">Iterator</span><span class="o">&amp;</span><span class="n">lt</span><span class="o">;</span><span class="n">Observer</span><span class="o">&amp;</span><span class="n">gt</span><span class="o">;</span> <span class="n">iterator</span> <span class="o">=</span> <span class="n">observers</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">while</span><span class="o">(</span><span class="n">iterator</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>        <span class="n">iterator</span><span class="o">.</span><span class="na">next</span><span class="o">().</span><span class="na">update</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p><strong>测试</strong><br>
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">test</span>
</span><span class='line'><span class="o">{&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="n">Observer</span> <span class="n">o1</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">ConcreteObserver</span><span class="o">();</span><span class="c1">//观察者</span>
</span><span class='line'>    <span class="n">Observer</span> <span class="n">o2</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">ConcreteObserver</span><span class="o">();</span><span class="c1">//观察者</span>
</span><span class='line'>    <span class="n">Observer</span> <span class="n">o3</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">ConcreteObserver</span><span class="o">();</span><span class="c1">//观察者</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Subject</span> <span class="n">s1</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">ConcreteSubject</span><span class="o">();</span><span class="c1">//目标</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">s1</span><span class="o">.</span><span class="na">attach</span><span class="o">(</span><span class="n">o1</span><span class="o">);</span>
</span><span class='line'>    <span class="n">s1</span><span class="o">.</span><span class="na">attach</span><span class="o">(</span><span class="n">o2</span><span class="o">);</span>
</span><span class='line'>    <span class="n">s1</span><span class="o">.</span><span class="na">attach</span><span class="o">(</span><span class="n">o3</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">s1</span><span class="o">.</span><span class="na">notifyObservers</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;--------------------------&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">s1</span><span class="o">.</span><span class="na">detach</span><span class="o">(</span><span class="n">o3</span><span class="o">);</span>
</span><span class='line'>    <span class="n">s1</span><span class="o">.</span><span class="na">notifyObservers</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;--------------------------&quot;</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p><strong>运行结果</strong><br>
<img src="/images/observerdp3.jpg"></p>

<p><strong>观察者模式优缺点</strong><br>
<img src="/images/observerdp4.jpg"></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[一天一设计模式之装饰模式[14]]]></title>
    <link href="http://www.regenthypo.com/blog/2016/07/20/decorator-design-pattern/"/>
    <updated>2016-07-20T21:01:14+08:00</updated>
    <id>http://www.regenthypo.com/blog/2016/07/20/decorator-design-pattern</id>
    <content type="html"><![CDATA[<p><font color=#FF0000><strong>[结构型模式]</strong></font></p>

<p><font color=#FF0000><strong>动态地给一个对象添加一些额外的职责。就增加功能来说，装饰模式相比生成子类更为灵活.</strong></font></p>

<p><font color=#FF0000><strong>别名:包装器 Wrapper</strong></font></p>

<p><strong>装饰模式结构</strong><br>
<img src="/images/decoratordp1.jpg"></p>

<p><strong>装饰模式的角色</strong><br>
<img src="/images/decoratordp2.jpg"></p>

<p><strong>装饰模式代码</strong></p>

<p><strong>抽象组件</strong><br>
<code>java
/**
 *  抽象构件角色
 */
public interface Component
{
    public void sampleOperation();
}
</code></p>

<p><strong>具体组件</strong><br>
<code>java
/**
 *  具体构件角色
 *  可以给具体组件上添加各种装饰
 */
public class ConcreteComponent implements Component
{   
    @Override
    public void sampleOperation()
    {
        System.out.println("具体组件");
    }
}
</code></p>

<p><strong>装饰角色</strong><br>
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">/&lt;</span><span class="n">em</span><span class="o">&gt;*</span>
</span><span class='line'> <span class="o">*</span>  <span class="n">装饰角色</span>
</span><span class='line'> <span class="o">*</span>
</span><span class='line'> <span class="o">*</span>  <span class="n">装饰角色类实现组件接口</span><span class="o">,</span><span class="n">与具体组件类之间是聚合关系</span><span class="o">.</span>
</span><span class='line'> <span class="o">&lt;/</span><span class="n">em</span><span class="o">&gt;/</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Decorator</span> <span class="kd">implements</span> <span class="n">Component</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="kd">private</span> <span class="n">Component</span> <span class="n">component</span><span class="o">;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="c1">//装饰角色类和组件类之间是聚合关系</span>
</span><span class='line'><span class="c1">//有参构造函数</span>
</span><span class='line'><span class="kd">public</span> <span class="nf">Decorator</span><span class="o">(</span><span class="n">Component</span> <span class="n">component</span><span class="o">)</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="k">this</span><span class="o">.</span><span class="na">component</span> <span class="o">=</span> <span class="n">component</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//无参构造函数</span>
</span><span class='line'><span class="kd">public</span> <span class="nf">Decorator</span><span class="o">()</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//实现抽象组件的方法</span>
</span><span class='line'><span class="nd">@Override</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">sampleOperation</span><span class="o">()</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="n">component</span><span class="o">.</span><span class="na">sampleOperation</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p><strong>具体装饰A</strong><br>
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">/&lt;</span><span class="n">em</span><span class="o">&gt;*</span>
</span><span class='line'> <span class="o">*</span>  <span class="n">具体装饰角色</span>
</span><span class='line'> <span class="o">&lt;/</span><span class="n">em</span><span class="o">&gt;/</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConcreteDecoratorA</span> <span class="kd">extends</span> <span class="n">Decorator</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="c1">//与组件之间是聚合关系</span>
</span><span class='line'>    <span class="kd">public</span> <span class="nf">ConcreteDecoratorA</span><span class="o">(</span><span class="n">Component</span> <span class="n">component</span><span class="o">)</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>        <span class="kd">super</span><span class="o">(</span><span class="n">component</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="nd">@Override</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">sampleOperation</span><span class="o">()</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="kd">super</span><span class="o">.</span><span class="na">sampleOperation</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;给组件添加装饰A&quot;</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p><strong>具体装饰B</strong><br>
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">/&lt;</span><span class="n">em</span><span class="o">&gt;*</span>
</span><span class='line'> <span class="o">*</span>  <span class="n">具体装饰角色</span>
</span><span class='line'> <span class="o">&lt;/</span><span class="n">em</span><span class="o">&gt;/</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConcreteDecoratorB</span> <span class="kd">extends</span> <span class="n">Decorator</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="c1">//与组件之间是聚合关系</span>
</span><span class='line'>    <span class="kd">public</span> <span class="nf">ConcreteDecoratorB</span><span class="o">(</span><span class="n">Component</span> <span class="n">component</span><span class="o">)</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>        <span class="kd">super</span><span class="o">(</span><span class="n">component</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="nd">@Override</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">sampleOperation</span><span class="o">()</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="kd">super</span><span class="o">.</span><span class="na">sampleOperation</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;给组件添加装饰B&quot;</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p><strong>测试类</strong><br>
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">mytest</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">Component</span> <span class="n">c</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">ConcreteComponent</span><span class="o">();</span><span class="c1">//没有装饰的组件&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="kd">private</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">Component</span> <span class="n">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">ConcreteDecoratorA</span><span class="o">(</span><span class="n">c</span><span class="o">);</span><span class="c1">//添加了一个装饰A的组件</span>
</span><span class='line'>
</span><span class='line'><span class="kd">private</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">Component</span> <span class="n">e</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">ConcreteDecoratorB</span><span class="o">(</span><span class="n">d</span><span class="o">);</span><span class="c1">//添加了装饰A和装饰B的组件</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="n">c</span><span class="o">.</span><span class="na">sampleOperation</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;---------------------&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">d</span><span class="o">.</span><span class="na">sampleOperation</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;---------------------&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">e</span><span class="o">.</span><span class="na">sampleOperation</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;---------------------&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Component</span> <span class="n">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">ConcreteDecoratorB</span><span class="o">(</span><span class="k">new</span> <span class="nf">ConcreteDecoratorA</span><span class="o">(</span><span class="k">new</span> <span class="nf">ConcreteComponent</span><span class="o">()));</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">f</span><span class="o">.</span><span class="na">sampleOperation</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;---------------------&quot;</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p><strong>运行结果</strong><br>
<img src="/images/decoratordp3.jpg"></p>

<p><strong>装饰模式优点</strong><br>
<img src="/images/decoratordp4.jpg"></p>

<p><strong>装饰模式缺点</strong><br>
<img src="/images/decoratordp5.jpg"></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[一天一设计模式之适配器模式[13]]]></title>
    <link href="http://www.regenthypo.com/blog/2016/07/20/adapter-design-pattern/"/>
    <updated>2016-07-20T19:38:22+08:00</updated>
    <id>http://www.regenthypo.com/blog/2016/07/20/adapter-design-pattern</id>
    <content type="html"><![CDATA[<p><font color=#FF0000><strong>[结构型模式]</strong></font></p>

<p><font color=#FF0000><strong>将一个类的接口转换成客户希望的另外一个接口，适配器模式使得原本由于接口 不兼容而 不能一起工作的哪些类可以一起工作.</strong></font></p>

<p><font color=#FF0000><strong>别名:包装器 Wrapper</strong></font></p>

<p><strong>类的适配器模式结构</strong><br>
<img src="/images/adapterdp1.jpg"></p>

<p><strong>对象的适配器模式结构</strong><br>
<img src="/images/adapterdp2.jpg"></p>

<p><strong>类的适配器模式角色</strong><br>
<img src="/images/adapterdp3.jpg"></p>

<p><strong>对象的适配器模式角色</strong><br>
<img src="/images/adapterdp4.jpg"></p>

<p><strong>类的适配器模式代码</strong></p>

<pre><code class="java ">/**
 *  源角色 
 */
public class Adaptee
{
    /**
     *  源类含有的方法 sampleOperation1
     */
    public void sampleOperation1()
    {
        System.out.println("oper1...");
    }
}
</code></pre>

<pre><code class="java ">/**
 *  目标角色
 */
public interface Target
{
    //这是源类也有的方法
    void sampleOperation1();

    //这是源类没有的方法
    void sampleOperation2();

}
</code></pre>

<pre><code class="java ">/**
 *  适配器角色 
 *  适配器将源接口转换成目标接口
 *
 *  类的适配器类继承源角色类来提供源角色类已有的方法,
 *  实现目标角色接口来添加目标角色有而源角色没有的方法.
 */
public class Adapter extends Adaptee implements Target
{
    //源角色也有的方法
    @Override
    public void sampleOperation1()
    {
        super.sampleOperation1();
    }

    /**
     * 源类Adaptee没有此方法,由适配器类添加
     */
    @Override
    public void sampleOperation2()
    {
        System.out.println("oper2...");
    }
}
</code></pre>

<pre><code class="java ">//测试
public class test
{
    private final static Target tar = new Adapter();

    public static void main(String[] args)
    {
        tar.sampleOperation1();
        tar.sampleOperation2();
    }

}
</code></pre>

<p><strong>对象的适配器模式代码</strong></p>

<pre><code class="java">/**
 *  源角色 
 */
public class Adaptee
{
    //源类有方法sampleOperation1
    public void sampleOperation1()
    {
        System.out.println("源角色自有方法sampleOperation1.");
    }
}
</code></pre>

<pre><code class="java">/**
 *  目标角色 
 */
public interface Target
{
    //源类也有的方法sampleOperation1
    void sampleOperation1();

    //源类没有的方法sampleOperation2
    void sampleOperation2();
}
</code></pre>

<pre><code class="java">/**
 *  适配器角色 
 */
public class Adapter implements Target
{
    private Adaptee adaptee;//源角色类

    //适配器类和源角色类之间是聚合关系.
    public Adapter(Adaptee adaptee)
    {
        this.adaptee = adaptee;
    }

    //源类也有的方法sampleOperation1
    @Override
    public void sampleOperation1()
    {
        adaptee.sampleOperation1();
    }

    //源类没有的方法,由适配器类来补充此方法
    @Override
    public void sampleOperation2()
    {
        System.out.println("适配器类增补方法sampleOperation2.");
    }
}
</code></pre>

<pre><code class="java">//测试
public class test2_1
{
    public static void main(String[] args)
    {
        Target target = new Adapter(new Adaptee());

        target.sampleOperation1();
        target.sampleOperation2();
    }
}
</code></pre>

<p><strong>适配器模式适用情况</strong><br>
<img src="/images/adapterdp4.jpg"></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[一天一设计模式之门面模式[12]]]></title>
    <link href="http://www.regenthypo.com/blog/2016/07/08/facade-design-pattern/"/>
    <updated>2016-07-08T18:51:26+08:00</updated>
    <id>http://www.regenthypo.com/blog/2016/07/08/facade-design-pattern</id>
    <content type="html"><![CDATA[<p><font color=#FF0000><strong>[结构型模式]</strong></font></p>

<p><font color=#FF0000><strong>外部与一个子系统的通信必须通过一个统一的门面(Facade)对象进行.</strong></font></p>

<p><img src="/images/facadedp1.jpg"></p>

<p><img src="/images/facadedp2.jpg"></p>

<p><strong>门面模式的角色</strong>
<img src="/images/facadedp3.jpg"></p>

<p><strong>结构</strong>
<img src="/images/facadedp4.jpg"></p>

<pre><code class="java">/**
 *  子系统角色 
 */
public class Alarm
{
    public void activate()
    {
        System.out.println("Activating the alarm.");
    }

    public void deactivate()
    {
        System.out.println("Deactivating the alarm.");
    }

    public void ring()
    {
        System.out.println("Ringing the alarm.");
    }

    public void stopRing()
    {
        System.out.println("Stop the alarm.");
    }
}
</code></pre>

<pre><code class="java">/**
 *  子系统角色 
 */
public class Camera
{
    public void turnOn()
    {
        System.out.println("Turning on the camera.");
    }

    public void turnOff()
    {
        System.out.println("Turning off the camera.");
    }

    public void rotate(int degrees)
    {
        System.out.println("rotate the camera by" + degrees + "degrees.");
    }
}
</code></pre>

<pre><code class="java">/**
 *  子系统角色 
 */
public class Light
{
    public void turnOn()
    {
        System.out.println("Turning on the light.");
    }

    public void turnOff()
    {
        System.out.println("Turning off the light.");
    }

    public void changeBulb()
    {
        System.out.println("changing the light-bulb.");
    }
}
</code></pre>

<pre><code class="java">/**
 *  子系统角色 
 */
public class Sensor
{
    public void activate()
    {
        System.out.println("Activating the sensor.");
    }

    public void deactivate()
    {
        System.out.println("Deactivating the sensor.");
    }

    public void trigger()
    {
        System.out.println("The sensor has been triggered.");
    }
}
</code></pre>

<pre><code class="java">/**
 *  门面角色 
 */
public class SecurityFacade
{
    private static Camera camera1 , camera2;
    private static Light light1 , light2 , light3;
    private static Sensor sensor;
    private static Alarm alarm;

//  static
    {
        camera1 = new Camera();
        camera2 = new Camera();
        light1 = new Light();
        light2 = new Light();
        light3 = new Light();
        sensor = new Sensor();
        alarm = new Alarm();
    }

    public void activate()
    {
        camera1.turnOn();
        camera2.turnOn();

        light1.turnOn();
        light2.turnOn();
        light3.turnOn();

        sensor.activate();

        alarm.activate();
    }

    public void deactivate()
    {
        camera1.turnOff();
        camera2.turnOff();

        light1.turnOff();
        light2.turnOff();
        light3.turnOff();

        sensor.deactivate();

        alarm.deactivate();
    }
}
</code></pre>

<pre><code class="java">/**
 *  客户端 
 */
public class Client
{
    private static SecurityFacade facade;
    private static SecurityFacade facade2;

    public static void main(String[] args)
    {
        facade = new SecurityFacade();

        facade.activate();
    }
}
</code></pre>

<p><strong>适用性</strong>
<img src="/images/facadedp5.jpg"></p>

<p><strong>门面模式优点</strong>
<img src="/images/facadedp6.jpg"></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[一天一设计模式之桥接模式[11]]]></title>
    <link href="http://www.regenthypo.com/blog/2016/07/07/bridge-design-pattern/"/>
    <updated>2016-07-07T20:50:45+08:00</updated>
    <id>http://www.regenthypo.com/blog/2016/07/07/bridge-design-pattern</id>
    <content type="html"><![CDATA[<p><font color=#FF0000><strong>[结构型模式]</strong></font></p>

<p><font color=#FF0000><strong>意图:将抽象部分与它的实现部分分离,使它们都可以独立地变化.</strong></font></p>

<p><img src="/images/bridgedp1.jpg"></p>

<p><img src="/images/bridgedp2.jpg"></p>

<p><img src="/images/bridgedp3.jpg"></p>

<pre><code class="java Abstraction.java">/**
 *  抽象化角色 
 */
public abstract class Abstraction
{
    public void operation(Implementor imp)
    {
        imp.operationImp();
    }
}
</code></pre>

<pre><code class="java RefinedAbstraction.java">/**
 *  修正抽象化角色 
 */
public class RefinedAbstraction extends Abstraction
{
    @Override
    public void operation(Implementor imp)
    {
        super.operation(imp);
    }
}
</code></pre>

<pre><code class="java Implementor.java">/**
 *  实现化角色
 */
public abstract class Implementor
{
    public abstract void operationImp();
}
</code></pre>

<pre><code class="java ConcreteImplementorA.java">/**
 *  具体实现化角色
 */
public class ConcreteImplementorA extends Implementor
{
    @Override
    public void operationImp()
    {
        System.out.println("ConcreteImplementorA");
    }
}
</code></pre>

<pre><code class="java ConcreteImplementorB.java">/**
 *  具体实现化角色
 */
public class ConcreteImplementorB extends Implementor
{
    @Override
    public void operationImp()
    {
        System.out.println("ConcreteImplementorB");
    }
}
</code></pre>

<pre><code class="java Client.java">public class Client
{
    public static void main(String[] args)
    {
        Abstraction abstraction = new RefinedAbstraction();

        abstraction.operation(new ConcreteImplementorA());
        abstraction.operation(new ConcreteImplementorB());
    }
}
</code></pre>

<p><img src="/images/bridgedp4.jpg"></p>

<p><img src="/images/bridgedp5.jpg"></p>
]]></content>
  </entry>
  
</feed>
